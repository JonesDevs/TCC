<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cod&Go - Painel Gamificado</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
    body {
      background: #1a0a3d;
      color: #eee;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      transition: background 0.6s ease;
    }
    header.header-principal {
      background: #3f2a6e;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.5);
    }
    .logo-titulo { font-weight: 700; font-size: 1.8rem; color: #c39eff; }
    .usuario-header { display: flex; align-items: center; gap: 1rem; font-weight: 600; }
    .avatar-header { width: 40px; height: 40px; border-radius: 50%; border: 2px solid #c39eff; cursor: pointer; }
    main.painel-container { flex: 1; display: flex; background: #2a1e57; overflow: hidden; transition: opacity 0.5s ease; }
    aside.menu-lateral {
      width: 220px; background: #3f2a6e; padding: 1.5rem 1rem;
      box-shadow: inset -2px 0 5px rgba(0,0,0,0.4);
      display: flex; flex-direction: column; align-items: center; gap: 2rem;
    }
    .logo-menu { width: 120px; filter: drop-shadow(0 0 5px #c39eff); }
    nav ul { list-style: none; width: 100%; text-align: center; }
    nav ul li { margin: 1rem 0; }
    nav ul li a {
      color: #d1b3ff; text-decoration: none; font-weight: 600; font-size: 1.1rem;
      display: block; padding: 0.5rem 0; border-radius: 8px; transition: background-color 0.3s;
    }
    nav ul li a:hover { background: #c39eff; color: #2a1e57; }

    /* --- CONTEÚDO PRINCIPAL --- */
    section.conteudo-principal {
      flex: 1; padding: 2rem; display: flex; flex-direction: column;
      align-items: center; overflow: auto;
    }
    .painel-central {
      background: #3f2a6e; border-radius: 15px; padding: 1.5rem;
      width: 100%; max-width: 850px; box-shadow: 0 0 20px #c39eff88; position: relative;
    }

    /* --- BARRA DE PROGRESSO --- */
    .barra-progresso.gamificada { margin-bottom: 1.5rem; }
    .barra { background: #6b4da3; border-radius: 20px; height: 20px; overflow: hidden; position: relative; }
    .preenchimento { background: #c39eff; height: 100%; width: 0%; transition: width 0.7s ease-in-out; border-radius: 20px 0 0 20px; }
    .percentual {
      position: absolute; right: 10px; top: 50%; transform: translateY(-50%);
      color: #fff; font-weight: 700; font-size: 0.9rem; text-shadow: 0 0 5px #551a8b;
    }

    /* --- POPUP --- */
    .popup {
      position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
      background: #5a3f95cc; border-radius: 15px; padding: 2rem; color: #eee;
      box-shadow: 0 0 20px #c39effbb; width: 320px; text-align: center; display: none; z-index: 10;
    }
    .popup h3 { margin-bottom: 1rem; font-weight: 700; font-size: 1.4rem; text-shadow: 0 0 5px #fff; }
    .popup button {
      background: #c39eff; border: none; padding: 0.7rem 1.2rem;
      border-radius: 10px; font-weight: 600; color: #2a1e57; cursor: pointer;
      transition: background-color 0.3s; box-shadow: 0 0 10px #c39effaa; margin: 0.3rem;
    }
    .popup button:hover { background: #d8baff; }

    /* --- NOVA TELA: INTRODUÇÃO --- */
    .tela-introducao {
      display: none;
      flex-direction: column;
      align-items: center;
      text-align: center;
      padding: 3rem;
      animation: fadeIn 0.6s ease forwards;
    }
    .tela-introducao h2 {
      font-size: 2rem;
      color: #d1b3ff;
      text-shadow: 0 0 10px #a77eff;
      margin-bottom: 1.2rem;
    }
    .tela-introducao p {
      max-width: 650px;
      line-height: 1.7;
      font-size: 1.05rem;
      color: #f1e6ff;
      margin-bottom: 2rem;
    }
    .btn-prosseguir {
      background: #c39eff;
      border: none;
      padding: 0.9rem 1.5rem;
      border-radius: 10px;
      font-weight: 600;
      color: #2a1e57;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.3s;
      box-shadow: 0 0 15px #c39effaa;
    }
    .btn-prosseguir:hover { background: #d8baff; }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <header class="header-principal">
    <h1 class="logo-titulo">Cod&Go</h1>
    <div class="usuario-header">
      <span class="nome-usuario">Olá, Usuário!</span>
      <img src="https://i.pravatar.cc/40" alt="Avatar do usuário" class="avatar-header" id="avatar-btn" />
      <button class="btn-editar" id="btn-editar">Editar Perfil</button>
    </div>
  </header>

  <main class="painel-container" id="painelPrincipal">
    <aside class="menu-lateral">
      <img src="https://cdn-icons-png.flaticon.com/512/906/906175.png" alt="Logo" class="logo-menu" />
      <nav>
        <ul>
          <li><a href="#">Módulos</a></li>
          <li><a href="#">Linguagens</a></li>
          <li><a href="#">Classificação</a></li>
          <li><a href="#">Desafios</a></li>
        </ul>
      </nav>
    </aside>

    <section class="conteudo-principal">
      <div class="painel-central" id="painelPrincipalConteudo">
        <h2>Painel Principal</h2>
        <div class="barra-progresso gamificada">
          <label>Progresso:</label>
          <div class="barra" id="barra">
            <div class="preenchimento" id="preenchimento"></div>
            <span class="percentual" id="percentual">0%</span>
          </div>
        </div>
        <canvas id="lago" width="800" height="300"></canvas>

        <div class="popup" id="popup-licao">
          <h3 id="titulo-licao">Começar Introdução?</h3>
          <button id="btn-iniciar">Ir para a lição</button>
          <button id="btn-fechar">Fechar</button>
        </div>
      </div>

      <!-- Nova Tela Introdução -->
      <div class="painel-central tela-introducao" id="telaIntroducao">
        <h2>Introdução ao Curso</h2>
        <p>Bem-vindo à introdução do seu curso! Aqui você vai entender o que será ensinado, como funcionam os módulos e o que esperar das próximas lições. Este espaço futuramente puxará as informações diretamente do banco de dados.</p>
        <button class="btn-prosseguir">Avançar</button>
      </div>
    </section>
  </main>


  <!-- Popup de Edição -->
  <div class="popup" id="popup-editar">
    <h3>Editar Perfil</h3>
    <input type="text" id="nome-usuario" placeholder="Nome do Usuário" />
    <input type="email" id="email-usuario" placeholder="E-mail" />
    <button id="btn-salvar">Salvar Alterações</button>
    <button id="btn-fechar-popup">Fechar</button>
  </div>

  <footer style="text-align:center; padding:1rem; background:#3f2a6e; color:#c39eff;">
    <p>Integrantes do TCC: João Pedro, Matheus Nogueira, Marcus Evaristo Rocha, Matheus Nunes</p>
  </footer>

  <script>
    const preenchimento = document.getElementById('preenchimento');
    const percentual = document.getElementById('percentual');
    const popup = document.getElementById('popup-licao');
    const tituloLicao = document.getElementById('titulo-licao');
    const btnIniciar = document.getElementById('btn-iniciar');
    const btnFechar = document.getElementById('btn-fechar');
    const canvas = document.getElementById('lago');
    const ctx = canvas.getContext('2d');
    const width = canvas.width, height = canvas.height;
    const painelPrincipal = document.getElementById('painelPrincipalConteudo');
    const telaIntroducao = document.getElementById('telaIntroducao');

    let progressoUsuario = 0;
    function atualizarBarra(p){ preenchimento.style.width = p+'%'; percentual.textContent = p+'%'; }

    const peixe = { x: 50, y: height/2, radius: 20, speed: 2, color: '#d3aaff' };
    const baias = [
      { x:220, y:height/2+10, radius:40, nome:"Introdução", bloqueado:false },
      { x:450, y:height/2-30, radius:40, nome:"Lição 1", bloqueado:true },
      { x:680, y:height/2+20, radius:40, nome:"Lição 2", bloqueado:true }
    ];

    let animating = true, targetBaiaIndex = 0;

    function desenharLago(){
      let grad = ctx.createLinearGradient(0,0,0,height);
      grad.addColorStop(0,'#4b2a6e');
      grad.addColorStop(1,'#1f0e3a');
      ctx.fillStyle = grad;
      ctx.fillRect(0,0,width,height);

      for(let i=0;i<30;i++){
        ctx.beginPath();
        ctx.arc((i*27)%width+10,(i*47)%height+10,5,0,Math.PI*2);
        ctx.fillStyle='rgba(159,126,243,0.3)';
        ctx.fill();
      }
    }

    function desenharBaia(baia){
      ctx.beginPath();
      const grad = ctx.createRadialGradient(baia.x,baia.y,10,baia.x,baia.y,baia.radius);
      grad.addColorStop(0, baia.bloqueado?'#333':'#a983ffaa');
      grad.addColorStop(1, baia.bloqueado?'#111':'#5a3f95cc');
      ctx.fillStyle=grad;
      ctx.shadowColor=baia.bloqueado?'#000':'#c39effcc';
      ctx.shadowBlur=10;
      ctx.arc(baia.x,baia.y,baia.radius,0,Math.PI*2);
      ctx.fill();

      ctx.font='16px Poppins';
      ctx.fillStyle=baia.bloqueado?'#777':'#d1b3ff';
      ctx.textAlign='center';
      ctx.fillText(baia.nome,baia.x,baia.y+baia.radius+20);
    }

    function desenharPeixe(){
      ctx.save();
      ctx.translate(peixe.x,peixe.y);
      ctx.fillStyle=peixe.color;
      ctx.beginPath();
      ctx.ellipse(0,0,peixe.radius*1.2,peixe.radius,0,0,Math.PI*2);
      ctx.fill();

      ctx.beginPath();
      ctx.moveTo(-peixe.radius*1.2,0);
      ctx.lineTo(-peixe.radius*1.8,-peixe.radius*0.7);
      ctx.lineTo(-peixe.radius*1.8,peixe.radius*0.7);
      ctx.closePath();
      ctx.fill();

      ctx.fillStyle='#fff';
      ctx.beginPath();
      ctx.arc(peixe.radius*0.5,-peixe.radius*0.2,peixe.radius*0.3,0,Math.PI*2);
      ctx.fill();

      ctx.fillStyle='#222';
      ctx.beginPath();
      ctx.arc(peixe.radius*0.55,-peixe.radius*0.2,peixe.radius*0.15,0,Math.PI*2);
      ctx.fill();

      ctx.restore();
    }

    function animar(){
      if(!animating) return;
      ctx.clearRect(0,0,width,height);
      desenharLago();
      baias.forEach(desenharBaia);

      let alvo = baias[targetBaiaIndex];
      let dx = alvo.x - peixe.x, dy = alvo.y - peixe.y, dist = Math.sqrt(dx*dx+dy*dy);
      if(dist>peixe.speed){
        peixe.x += (dx/dist)*peixe.speed;
        peixe.y += (dy/dist)*peixe.speed + Math.sin(peixe.x*0.1)*0.5;
      } else {
        peixe.x = alvo.x; peixe.y = alvo.y;
        animating = false;
      }
      desenharPeixe();
      requestAnimationFrame(animar);
    }

    animar();

    canvas.addEventListener('click',(e)=>{
      const rect = canvas.getBoundingClientRect();
      const mx = e.clientX - rect.left;
      const my = e.clientY - rect.top;
      baias.forEach((baia,i)=>{
        let dx = mx - baia.x, dy = my - baia.y;
        if(Math.sqrt(dx*dx+dy*dy) < baia.radius && !baia.bloqueado && i===targetBaiaIndex){
          tituloLicao.textContent = `Começar ${baia.nome}?`;
          popup.style.display='block';
        }
      });
    });

    btnIniciar.addEventListener('click',()=>{
      popup.style.display='none';
      if(targetBaiaIndex === 0){
        painelPrincipal.style.display='none';
        telaIntroducao.style.display='flex';
        return;
      }
      progressoUsuario = Math.min(100, ((targetBaiaIndex+1)/baias.length)*100);
      atualizarBarra(progressoUsuario);
      if(targetBaiaIndex < baias.length-1){
        baias[targetBaiaIndex+1].bloqueado = false;
        targetBaiaIndex++;
        animating = true;
        animar();
      } else {
        alert('Todas as lições concluídas!');
      }
    });

    btnFechar.addEventListener('click',()=>{ popup.style.display='none'; });

    atualizarBarra(progressoUsuario);

 const btnEditar = document.getElementById('btn-editar');
    const popupEditar = document.getElementById('popup-editar');
    const btnFecharPopup = document.getElementById('btn-fechar-popup');
    const btnSalvar = document.getElementById('btn-salvar');

    // Mostrar o popup ao clicar no botão
    btnEditar.addEventListener('click', () => {
      popupEditar.style.display = 'block';
    });

    // Fechar o popup
    btnFecharPopup.addEventListener('click', () => {
      popupEditar.style.display = 'none';
    });

    // Lógica para salvar as alterações (aqui você pode adicionar funcionalidades para salvar os dados)
    btnSalvar.addEventListener('click', () => {
      const nome = document.getElementById('nome-usuario').value;
      const email = document.getElementById('email-usuario').value;
      console.log('Nome:', nome, 'E-mail:', email); // Aqui você pode implementar uma lógica para salvar ou atualizar os dados.
      popupEditar.style.display = 'none';
    });

  </script>
</body>
</html>
